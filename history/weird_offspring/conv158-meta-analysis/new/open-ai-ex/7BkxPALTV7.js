import{T as t,b4 as E,c$ as M,G as m,bv as T,a_ as h,aJ as _,E as S}from"./index-CfA4yAo4.js";const N="gpt-4o",w="gpt-4-turbo",L={id:"No models available",allowedCompletionModes:[],attributes:[],contextLength:0,maxTokens:0},x={[t.freeform]:[],[t.chat]:["logProbs","bestOf","startSequence","restartSequence"],[t.assistant]:[]},b={[t.freeform]:{id:"gpt-3.5-turbo-instruct",allowedCompletionModes:[t.freeform],attributes:["gpt3_5"],contextLength:4097,maxTokens:4097},[t.chat]:{id:"gpt-4o",allowedCompletionModes:[t.chat],attributes:["chat"],contextLength:2049,maxTokens:4096},[t.assistant]:{id:"gpt-3.5-turbo",allowedCompletionModes:[t.chat,t.assistant],attributes:["chat"],contextLength:4097,maxTokens:4097}},A=(e,n)=>{const s=n.filter(o=>o.id===e);return s.length>0&&!!s[0].retrieval_enabled};function U(e,n=t.freeform){var l;const s=C(n),o=y(e,n);let u=s;const r=E.parse(window.location.search);if(typeof r.model=="string"){const a=o.find(c=>c.id===r.model);if(e.length===0)return{id:r.model,allowedCompletionModes:[n],attributes:[],contextLength:2049,maxTokens:2049};a?u=a.id:M({model:void 0})}const d=o.find(a=>a.id===u);return d||((l=o[0])!=null?l:L)}function C(e=t.freeform){return b[e].id}const f={GPT3_5:"GPT-3.5",CHAT:"Chat",FINE_TUNES:"Fine-tunes",OTHER:"Other"},F=e=>({id:e.id,allowedCompletionModes:e.allowed_completion_modes,attributes:e.attributes,contextLength:e.context_length,maxTokens:e.max_tokens});function k(e,n,s={}){const{includeFineTunedModels:o=!1,includeEmbeddingModels:u=!1,includeAsrModels:r=!1}=s,d=m.useState(i=>i.user),l=m.useState(i=>i.loading),a=!!(e&&d),{data:c=[],isLoading:p}=T({queryKey:[e,n,"list_dashboard_models","get"],enabled:a,staleTime:1/0,queryFn:()=>h.listDashboardModels().then(({data:i})=>i).catch(i=>(_.error("Error listing models",i),[]))});return S.useMemo(()=>!e&&!l?{engineOptions:Object.values(b),isLoading:!1}:p?{engineOptions:[],isLoading:!0}:{engineOptions:c.filter(g=>!(!u&&g.attributes.includes("embedding")||!r&&g.attributes.includes("asr")||!o&&g.attributes.includes("fine_tune"))).map(F),isLoading:!1},[e,l,p,r,u,o,c])}function G(e){return e.attributes.includes("fine_tune")?f.FINE_TUNES:e.attributes.includes("chat")?f.CHAT:e.attributes.includes("gpt3_5")?f.GPT3_5:f.OTHER}function O(e){return/^ft:/.test(e)}function q(e){return/^ft:gpt-/.test(e.id)}function B(e){return O(e)?e.split(":")[1]:e}function P(e,n){return e.allowedCompletionModes.includes(n)}function y(e,n=t.freeform){return e.filter(s=>P(s,n))}function R(e,n=t.freeform){return!x[n].includes(e)}export{N as D,f as G,L as N,x as U,G as a,B as b,A as c,w as d,q as e,y as f,U as g,C as h,O as i,R as j,P as k,k as u};
